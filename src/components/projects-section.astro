---
// import { Image } from "astro:assets";

import { Icon } from "astro-icon/components";
import lastfmViewer from "@/images/@lastfm-viewer.webp";
import machlist from "@/images/machlist.webp";
import recyclink from "@/images/recyclink.webp";
import supaShop from "@/images/supa-shop.webp";
import react from "@/images/react.svg";
import tailwind from "@/images/tailwind.svg";
import tanstack from "@/images/tanstack.svg";
import supabase from "@/images/supabase.svg";
import ts from "@/images/ts.svg";
import solid from "@/images/solid.svg";
import svelte from "@/images/svelte.svg";
import cpp from "@/images/cpp.svg";
import opensource from "@/images/oss.svg";
import iot from "@/images/iot.svg";
import astro from "@/images/astro.svg";
import SectionHeading from "./SectionHeading.astro";

const projects = [
	{
		title: "supa-shop",
		description:
			"A modern, full-stack e-commerce platform built with React, TypeScript, and Supabase. Features real-time inventory, secure auth, and responsive design.",
		image: supaShop,
		tags: [
			{ name: "React", icon: react },
			{ name: "TailwindCSS", icon: tailwind },
			{ name: "TanStack Router", icon: tanstack },
			{ name: "i18n", icon: null },
			{ name: "Supabase", icon: supabase },
			{ name: "TypeScript", icon: ts },
		],
		liveUrl: null, // Not specified in CV
		githubUrl: "https://github.com/zoasr/supa-shop",
	},
	{
		title: "@lastfm-viewer",
		description:
			"UI web components (npm package) to view recent scrobbles for a Last.fm user. Built for React, Solid, and Svelte.",
		image: lastfmViewer,
		tags: [
			{ name: "React", icon: react },
			{ name: "Solid.js", icon: solid },
			{ name: "Svelte", icon: svelte },
			{ name: "NPM", icon: null },
			{ name: "API", icon: null },
			{ name: "Last.fm", icon: null },
		],
		liveUrl: "https://lastfm-viewer.vercel.app/",
		githubUrl: "https://github.com/zoasr/lastfm-viewer", // CV implies this is the repo for the project
	},
	{
		title: "libmatrix",
		description:
			"A lightweight, open-source C++ library for various matrix computations including creation, basic operations, and advanced functions.",
		image: null,
		tags: [
			{ name: "C++", icon: cpp },
			{ name: "Library", icon: null },
			{ name: "Mathematics", icon: null },
			{ name: "Open Source", icon: opensource },
		],
		liveUrl: null,
		githubUrl: "https://github.com/ZOASR/libmatrix",
	},
	{
		title: "FishBot (Graduation Project)",
		description:
			"Fully automated monitoring system for fish farms with real-time analytics for water quality, fish health, and automated controls.",
		image: null,
		tags: [
			{ name: "IoT", icon: null },
			{ name: "Arduino", icon: null },
			{ name: "RaspberryPi", icon: null },
			{ name: "MQTT", icon: null },
			{ name: "C++", icon: cpp },
			{ name: "Programming", icon: null },
		],
		liveUrl: null,
		githubUrl: null,
	},
	{
		title: "Smart Home System",
		description:
			"Comprehensive smart home project integrating IoT devices and automation for enhanced convenience, energy efficiency, and security.",
		image: null,
		tags: [
			{ name: "Smart Home", icon: null },
			{ name: "IoT", icon: null },
			{ name: "Arduino", icon: null },
			{ name: "C++", icon: cpp },
			{ name: "Programming", icon: null },
		],
		liveUrl: null,
		githubUrl: null,
	},
	{
		title: "Recyclink",
		description:
			"Industrial company website. Designed and managed content, built with Astro.",
		image: recyclink,
		tags: [
			{ name: "Astro", icon: astro },
			{ name: "Frontend", icon: null },
			{ name: "Content Management", icon: null },
		],
		liveUrl: "https://recyc-link.vercel.app/en/",
		githubUrl: "https://github.com/zoasr/recyc-link",
	},
	{
		title: "Machlist",
		description:
			"Industrial company website. Designed and managed content, built with Astro.",
		image: machlist,
		tags: [
			{ name: "Astro", icon: astro },
			{ name: "Frontend", icon: null },
			{ name: "UI/UX", icon: null },
		],
		liveUrl: "https://machlist.vercel.app/en/",
		githubUrl: "https://github.com/zoasr/machlist",
	},
];
---

<section
	id="projects"
	class="w-full py-16 md:py-24 bg-card border-b-2 border-border/60"
>
	<div class="container mx-auto px-4">
		<SectionHeading title="My Projects" sectionId="projects" />
		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
			{
				projects.map((project) => (
					<div class="futuristic-card flex flex-col overflow-hidden rounded-lg group">
						<div class="relative overflow-hidden">
							{project.image !== null && (
								<>
									<img
										src={project.image.src}
										alt={project.title}
										width={500}
										height={300}
										class="object-cover w-full h-52 transition-transform duration-500 group-hover:scale-105"
									/>
									<div class="absolute inset-0 bg-black/30 group-hover:bg-black/10 transition-colors" />
								</>
							)}
						</div>
						<div class="p-6 flex flex-col flex-grow">
							<h3
								class="font-semibold text-foreground mb-2 group-hover:text-primary transition-colors"
								class:list={
									project.image !== null
										? "text-xl"
										: "text-4xl"
								}
							>
								{project.title}
							</h3>
							<p class="text-muted-foreground text-sm flex-grow mb-4">
								{project.description}
							</p>
							<div class="mb-4 flex flex-wrap gap-2">
								{project.tags.map((tag) => (
									<span class="card-tag flex gap-1 text-[clamp(1rem,1vw,2rem)] items-center border-border/20 border-1 px-2 py-0.5 bg-primary/10 text-primary text-xs rounded-full hover:bg-primary/20 transition-colors cursor-default">
										{tag.icon && (
											<tag.icon class="size-[clamp(0.6rem,1vw,1rem)]" />
										)}
										{tag.name}
									</span>
								))}
							</div>
						</div>
						<div class="p-6 pt-0 mt-auto flex justify-end gap-4">
							{project.githubUrl && (
								<a
									href={project.githubUrl}
									target="_blank"
									rel="noopener noreferrer"
									class="text-muted-foreground hover:text-primary transition-colors transform hover:scale-110"
									aria-label={`${project.title} GitHub repository`}
								>
									<Icon
										name="pixelarticons:github"
										class="h-6 w-6"
									/>
								</a>
							)}
							{project.liveUrl && (
								<a
									href={project.liveUrl}
									target="_blank"
									rel="noopener noreferrer"
									class="text-muted-foreground hover:text-primary transition-colors transform hover:scale-110"
									aria-label={`${project.title} live demo`}
								>
									<Icon
										name="pixelarticons:external-link"
										class={"h-6 w-6"}
									/>
								</a>
							)}
						</div>
					</div>
				))
			}
		</div>
	</div>
</section>

<style>
	.card-tag {
		box-shadow: inset 0 0 0 1px
			color-mix(in hsl, var(--primary) 10%, transparent);
	}
	.card-tag:hover {
		box-shadow: inset 0 -1px 0 1px color-mix(in hsl, var(--primary) 20%, transparent);
	}
</style>

<script>
	import { gsap } from "gsap";
	import { ScrollTrigger } from "gsap/ScrollTrigger";

	gsap.registerPlugin(ScrollTrigger);

	//stagger animation of cards on section scroll

	gsap.from(`section#projects .futuristic-card`, {
		x: -100,
		duration: 1,
		ease: "back.out",
		stagger: 0.2,
		opacity: 0,
		scrollTrigger: {
			trigger: "section#projects .grid",
			toggleActions: "restart none none reverse",
			start: "top 80%",
			end: "bottom 20%",
		},
	});
</script>
